"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[942],{942:(Ze,M,d)=>{d.r(M),d.d(M,{AddContactPageModule:()=>Qe});var re=d(8434),S=d(4341),f=d(7125),T=d(33),C=d(467),g=d(9842),s=d(1360),v=(d(2214),d(1985));function V(t){void 0===t&&((0,s.Af3)(V),t=(0,s.WQX)(s.zZn));const e=t.get(s.u5s);return n=>new v.c(r=>{const o=e.add();let u=!1;function i(){u||(o(),u=!0)}const l=n.subscribe({next:a=>{r.next(a),i()},complete:()=>{r.complete(),i()},error:a=>{r.error(a),i()}});return l.add(()=>{r.unsubscribe(),i()}),l})}var ae=d(8359);class le extends ae.yU{constructor(e,n){super()}schedule(e,n=0){return this}}const E={setInterval(t,e,...n){const{delegate:r}=E;return null!=r&&r.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=E;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0};var ce=d(7908);class k extends le{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const o=this.id,u=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(u,o,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,n),this}requestAsyncId(e,n,r=0){return E.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&E.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let o,r=!1;try{this.work(e)}catch(u){r=!0,o=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.o)(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const B={now:()=>(B.delegate||Date).now(),delegate:void 0};class _{constructor(e,n=_.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}_.now=B.now;class L extends _{constructor(e,n=_.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const pe=new class fe extends L{}(class de extends k{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),ge=new L(k);var U=d(6745),q=d(941),h=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(h||{}),R=(0,s.naY)()&&typeof Zone<"u"?h.WARN:h.SILENT;class Q{constructor(e,n=pe){(0,g.A)(this,"zone",void 0),(0,g.A)(this,"delegate",void 0),this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const o=this.zone;return this.delegate.schedule(function(i){o?o.runGuarded(()=>{e.apply(this,[i])}):e.apply(this,[i])},n,r)}}let _e=(()=>{var t;class e{constructor(){(0,g.A)(this,"outsideAngular",void 0),(0,g.A)(this,"insideAngular",void 0);const r=(0,s.WQX)(s.SKi);this.outsideAngular=r.runOutsideAngular(()=>new Q(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=r.run(()=>new Q(typeof Zone>"u"?void 0:Zone.current,ge))}}return t=e,(0,g.A)(e,"\u0275fac",function(r){return new(r||t)}),(0,g.A)(e,"\u0275prov",s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})),e})();var Z=!1;function p(t){const e=(0,s.WQX)(s.SKi,{optional:!0});return e?e.run(()=>t()):t()}const Ie=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),(0,s.N4e)(n,()=>p(()=>t.apply(void 0,r)))),y=(t,e,n)=>(n||(n=e?h.WARN:h.VERBOSE),function(){let r;const o=arguments;let u,i,l;try{u=(0,s.WQX)(_e),i=(0,s.WQX)(s.u5s),l=(0,s.WQX)(s.uvJ)}catch{return function ye(t,e){!Z&&(R>h.SILENT||(0,s.naY)())&&(Z=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),R>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}(t,n),t.apply(this,o)}for(let c=0;c<arguments.length;c++)"function"==typeof o[c]&&(e&&(r||(r=p(()=>i.add()))),o[c]=Ie(o[c],r,l));const a=function Ae(t){const e=(0,s.WQX)(s.SKi,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}(()=>t.apply(this,o));return e?a instanceof v.c?a.pipe((0,U._)(u.outsideAngular),(0,q.Q)(u.insideAngular),V(l)):a instanceof Promise?p(()=>new Promise((c,m)=>{i.run(()=>a).then(O=>(0,s.N4e)(l,()=>p(()=>c(O))),O=>(0,s.N4e)(l,()=>p(()=>m(O))))})):"function"==typeof a&&r?function(){return setTimeout(r,0),a.apply(this,arguments)}:p(()=>a):a instanceof v.c?a.pipe((0,U._)(u.outsideAngular),(0,q.Q)(u.insideAngular)):p(()=>a)});var A=d(3273),X=d(6354),b=function(){return b=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++)for(var u in n=arguments[r])Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u]);return e},b.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var Ce={includeMetadataChanges:!1};function xe(t,e){return void 0===e&&(e={}),function ze(t){return function w(t,e){return void 0===e&&(e=Ce),new v.c(function(n){return{unsubscribe:(0,A.aQ)(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}})}(t,{includeMetadataChanges:!0}).pipe((0,X.T)(function(e){return e.docs}))}(t).pipe((0,X.T)(function(n){return n.map(function(r){return function G(t,e){var n;void 0===e&&(e={});var r=t.data(e);return t.exists()&&"object"==typeof r&&null!==r&&e.idField?b(b({},r),((n={})[e.idField]=t.id,n)):r}(r,e)})}))}class I{constructor(e){return e}}const Ve=y(xe,!0),ee=y(A.rJ,!0,2),te=y(A.H9,!0,2),ke=y(A.x7,!0),Be=y(A.BN,!0,2);var ne=d(6828);let Le=(()=>{var t;class e{constructor(r,o){this.firestore=r,this.authService=o}getContacts(){const r=this.authService.getCurrentUser();if(!r)return new v.c(u=>{u.next([]),u.complete()});const o=ee(this.firestore,`users/${r.uid}/contacts`);return Ve(o,{idField:"id"})}contactExistsByPhone(r){var o=this;return(0,C.A)(function*(){ee(o.firestore,"users");const i=yield ke(te(o.firestore,`users/${r}`));return i.exists()?i.data():null})()}}return(t=e).\u0275fac=function(r){return new(r||t)(s.KVO(I),s.KVO(ne.u))},t.\u0275prov=s.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Ue=[{path:"",component:(()=>{var t;class e{constructor(r,o,u,i){this.contactService=r,this.authService=o,this.firestore=u,this.toastController=i,this.phoneNumber=""}addContact(){var r=this;return(0,C.A)(function*(){const o=r.authService.getCurrentUser();if(!o)return;const u=yield r.contactService.contactExistsByPhone(r.phoneNumber);if(u){const i=te(r.firestore,`users/${o.uid}/contacts/${r.phoneNumber}`);yield Be(i,u),r.showToast("Contacto agregado exitosamente \u2705"),r.phoneNumber=""}else r.showToast("\u274c El contacto no existe")})()}showToast(r){var o=this;return(0,C.A)(function*(){(yield o.toastController.create({message:r,duration:3e3,color:"primary",position:"bottom"})).present()})()}}return(t=e).\u0275fac=function(r){return new(r||t)(s.rXU(Le),s.rXU(ne.u),s.rXU(I),s.rXU(f.K_))},t.\u0275cmp=s.VBU({type:t,selectors:[["app-add-contact"]],standalone:!1,decls:11,vars:2,consts:[[1,"ion-padding"],["position","floating"],["type","text",3,"ngModelChange","ngModel"],["expand","block",3,"click","disabled"]],template:function(r,o){1&r&&(s.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s.EFF(3,"Agregar Contacto"),s.k0s()()(),s.j41(4,"ion-content",0)(5,"ion-item")(6,"ion-label",1),s.EFF(7,"N\xfamero de Tel\xe9fono"),s.k0s(),s.j41(8,"ion-input",2),s.mxI("ngModelChange",function(i){return s.DH7(o.phoneNumber,i)||(o.phoneNumber=i),i}),s.k0s()(),s.j41(9,"ion-button",3),s.bIt("click",function(){return o.addContact()}),s.EFF(10," Agregar Contacto "),s.k0s()()),2&r&&(s.R7$(8),s.R50("ngModel",o.phoneNumber),s.R7$(),s.Y8G("disabled",!o.phoneNumber))},dependencies:[S.BC,S.vS,f.Jm,f.W9,f.eU,f.$w,f.uz,f.he,f.BC,f.ai,f.Gw],encapsulation:2}),e})()}];let qe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=s.$C({type:t}),t.\u0275inj=s.G2t({imports:[T.iI.forChild(Ue),T.iI]}),e})(),Qe=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=s.$C({type:t}),t.\u0275inj=s.G2t({imports:[re.MD,S.YN,f.bv,qe]}),e})()}}]);